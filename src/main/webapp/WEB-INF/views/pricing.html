<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pricing Plans | Talentrock - Choose Your Growth Plan</title>
    <meta name="description"
        content="Talentrock freelancer subscription plans. Free, Growth ‚Çπ999, Pro ‚Çπ1799, Elite ‚Çπ2499. Scale your freelancing income with the right plan." />
    <link rel="stylesheet" th:href="@{/css/style.css}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet" />
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üöÄ</text></svg>" />
    <style>
        /* ============================================================
           PRICING PAGE ‚Äî TALENTROCK PREMIUM THEME
           ============================================================ */

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #050b18;
            color: #e2e8f0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ---- ANIMATED BACKGROUND GRID ---- */
        .pricing-bg {
            position: fixed;
            inset: 0;
            z-index: 0;
            background:
                radial-gradient(ellipse 80% 60% at 50% -10%, rgba(99, 102, 241, 0.18) 0%, transparent 70%),
                radial-gradient(ellipse 50% 40% at 85% 80%, rgba(236, 72, 153, 0.10) 0%, transparent 60%),
                radial-gradient(ellipse 40% 30% at 10% 90%, rgba(6, 182, 212, 0.08) 0%, transparent 60%);
            pointer-events: none;
        }

        .pricing-bg::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image:
                linear-gradient(rgba(99, 102, 241, 0.04) 1px, transparent 1px),
                linear-gradient(90deg, rgba(99, 102, 241, 0.04) 1px, transparent 1px);
            background-size: 60px 60px;
        }

        /* ---- NAVBAR ---- */
        .pricing-nav {
            position: relative;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.2rem 3rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
            background: rgba(5, 11, 24, 0.85);
            backdrop-filter: blur(20px);
        }

        .pricing-nav .nav-brand {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.4rem;
            font-weight: 900;
            color: #fff;
            text-decoration: none;
            letter-spacing: -0.02em;
        }

        .pricing-nav .nav-brand span {
            color: #818cf8;
        }

        .pricing-nav .nav-links {
            display: flex;
            align-items: center;
            gap: 2rem;
            list-style: none;
        }

        .pricing-nav .nav-links a {
            color: rgba(255, 255, 255, 0.65);
            text-decoration: none;
            font-size: 0.92rem;
            font-weight: 500;
            transition: color 0.2s;
        }

        .pricing-nav .nav-links a:hover,
        .pricing-nav .nav-links a.active {
            color: #fff;
        }

        .pricing-nav .nav-cta {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .btn-nav-ghost {
            padding: 0.5rem 1.2rem;
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.75);
            text-decoration: none;
            font-size: 0.87rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-nav-ghost:hover {
            background: rgba(255, 255, 255, 0.07);
            color: #fff;
        }

        .btn-nav-primary {
            padding: 0.5rem 1.3rem;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 8px;
            color: #fff;
            text-decoration: none;
            font-size: 0.87rem;
            font-weight: 600;
            transition: all 0.2s;
        }

        .btn-nav-primary:hover {
            opacity: 0.88;
            transform: translateY(-1px);
        }

        /* ---- HERO HEADER ---- */
        .pricing-hero {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 5rem 2rem 3.5rem;
        }

        .pricing-hero .pill-tag {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(99, 102, 241, 0.12);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 999px;
            padding: 0.4rem 1.1rem;
            font-size: 0.82rem;
            font-weight: 600;
            color: #a5b4fc;
            letter-spacing: 0.04em;
            text-transform: uppercase;
            margin-bottom: 1.5rem;
        }

        .pricing-hero .pill-tag::before {
            content: '';
            width: 7px;
            height: 7px;
            background: #6366f1;
            border-radius: 50%;
            animation: pulse-dot 2s infinite;
        }

        @keyframes pulse-dot {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.5;
                transform: scale(0.7);
            }
        }

        .pricing-hero h1 {
            font-size: clamp(2.4rem, 6vw, 4rem);
            font-weight: 900;
            line-height: 1.08;
            letter-spacing: -0.04em;
            color: #fff;
            margin-bottom: 1rem;
        }

        .pricing-hero h1 .grad {
            background: linear-gradient(135deg, #818cf8 0%, #c084fc 50%, #f472b6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .pricing-hero p {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.55);
            max-width: 560px;
            margin: 0 auto 2.5rem;
            line-height: 1.7;
        }

        /* ---- TOGGLE (Annual/Monthly) ---- */
        .billing-toggle {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 999px;
            padding: 0.4rem 0.5rem 0.4rem 1rem;
            font-size: 0.88rem;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 4rem;
        }

        .billing-toggle .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
            cursor: pointer;
        }

        .billing-toggle .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-track {
            position: absolute;
            inset: 0;
            background: rgba(99, 102, 241, 0.25);
            border-radius: 999px;
            border: 1px solid rgba(99, 102, 241, 0.4);
            transition: background 0.3s;
        }

        .toggle-thumb {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 18px;
            height: 18px;
            background: #6366f1;
            border-radius: 50%;
            transition: transform 0.3s;
        }

        .billing-toggle input:checked~.toggle-track {
            background: rgba(99, 102, 241, 0.5);
        }

        .billing-toggle input:checked~.toggle-thumb {
            transform: translateX(20px);
        }

        .save-badge {
            background: linear-gradient(135deg, #10b981, #059669);
            color: #fff;
            font-size: 0.72rem;
            font-weight: 700;
            padding: 0.2rem 0.6rem;
            border-radius: 999px;
            letter-spacing: 0.03em;
        }

        /* ---- PLANS GRID ---- */
        .plans-section {
            position: relative;
            z-index: 10;
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 2rem 6rem;
        }

        .plans-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.25rem;
            align-items: start;
        }

        @media (max-width: 1100px) {
            .plans-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .plans-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ---- PLAN CARD BASE ---- */
        .plan-card {
            position: relative;
            border-radius: 20px;
            padding: 2rem 1.75rem 2.25rem;
            border: 1px solid rgba(255, 255, 255, 0.08);
            background: rgba(15, 22, 40, 0.7);
            backdrop-filter: blur(12px);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: hidden;
        }

        .plan-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 24px 60px rgba(0, 0, 0, 0.5);
        }

        .plan-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            border-radius: 20px 20px 0 0;
        }

        /* ---- PLAN COLORS ---- */
        /* Free */
        .plan-free::before {
            background: linear-gradient(90deg, #64748b, #94a3b8);
        }

        .plan-free .plan-icon-wrap {
            background: rgba(100, 116, 139, 0.15);
        }

        .plan-free .plan-icon {
            color: #94a3b8;
        }

        .plan-free .plan-btn {
            border-color: rgba(94, 114, 228, 0.3);
            color: #94a3b8;
        }

        .plan-free .plan-btn:hover {
            background: rgba(100, 116, 139, 0.12);
        }

        /* Growth */
        .plan-growth::before {
            background: linear-gradient(90deg, #06b6d4, #22d3ee);
        }

        .plan-growth .plan-icon-wrap {
            background: rgba(6, 182, 212, 0.12);
        }

        .plan-growth .plan-icon {
            color: #22d3ee;
        }

        .plan-growth .plan-badge {
            background: rgba(6, 182, 212, 0.15);
            color: #22d3ee;
            border-color: rgba(6, 182, 212, 0.25);
        }

        .plan-growth .feature-check {
            color: #22d3ee;
        }

        .plan-growth .plan-btn-solid {
            background: linear-gradient(135deg, #06b6d4, #0891b2);
        }

        .plan-growth .plan-btn-solid:hover {
            opacity: 0.88;
        }

        /* Pro ‚Äî FEATURED */
        .plan-pro {
            border-color: rgba(99, 102, 241, 0.3);
            background: rgba(22, 28, 52, 0.85);
            box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.2), 0 20px 60px rgba(99, 102, 241, 0.15);
        }

        .plan-pro::before {
            background: linear-gradient(90deg, #6366f1, #a78bfa, #ec4899);
        }

        .plan-pro .plan-icon-wrap {
            background: rgba(99, 102, 241, 0.15);
        }

        .plan-pro .plan-icon {
            color: #818cf8;
        }

        .plan-pro .plan-badge {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(167, 139, 250, 0.15));
            color: #a78bfa;
            border-color: rgba(99, 102, 241, 0.35);
        }

        .plan-pro .feature-check {
            color: #818cf8;
        }

        .plan-pro .plan-btn-solid {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
        }

        .plan-pro .plan-btn-solid:hover {
            opacity: 0.88;
        }

        .best-value-ring {
            position: absolute;
            top: -1px;
            right: 20px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: #fff;
            font-size: 0.72rem;
            font-weight: 700;
            padding: 0.35rem 0.9rem;
            border-radius: 0 0 10px 10px;
            letter-spacing: 0.06em;
            text-transform: uppercase;
        }

        /* Elite */
        .plan-elite::before {
            background: linear-gradient(90deg, #f59e0b, #fbbf24, #f97316);
        }

        .plan-elite .plan-icon-wrap {
            background: rgba(245, 158, 11, 0.12);
        }

        .plan-elite .plan-icon {
            color: #fbbf24;
        }

        .plan-elite .plan-badge {
            background: rgba(245, 158, 11, 0.12);
            color: #fbbf24;
            border-color: rgba(245, 158, 11, 0.25);
        }

        .plan-elite .feature-check {
            color: #fbbf24;
        }

        .plan-elite .plan-btn-solid {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .plan-elite .plan-btn-solid:hover {
            opacity: 0.88;
        }

        /* ---- CARD INTERNALS ---- */
        .plan-icon-wrap {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.1rem;
        }

        .plan-icon {
            font-size: 1.5rem;
        }

        .plan-name {
            font-size: 1.05rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 0.3rem;
        }

        .plan-badge {
            display: inline-block;
            font-size: 0.73rem;
            font-weight: 600;
            padding: 0.2rem 0.65rem;
            border-radius: 999px;
            border: 1px solid;
            margin-bottom: 1.2rem;
            letter-spacing: 0.03em;
        }

        .plan-price {
            display: flex;
            align-items: flex-end;
            gap: 0.3rem;
            margin-bottom: 0.3rem;
        }

        .price-currency {
            font-size: 1.2rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.7);
            padding-bottom: 0.3rem;
        }

        .price-amount {
            font-size: 3rem;
            font-weight: 900;
            color: #fff;
            line-height: 1;
            letter-spacing: -0.04em;
        }

        .price-period {
            font-size: 0.83rem;
            color: rgba(255, 255, 255, 0.4);
            padding-bottom: 0.35rem;
        }

        .price-desc {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.35);
            margin-bottom: 1.5rem;
        }

        .plan-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.07);
            margin-bottom: 1.4rem;
        }

        /* ---- REVENUE LOGIC CALLOUT ---- */
        .revenue-callout {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.07);
            border-radius: 10px;
            padding: 0.9rem 1rem;
            margin-bottom: 1.4rem;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.5);
            line-height: 1.6;
        }

        .revenue-callout strong {
            color: rgba(255, 255, 255, 0.8);
            font-weight: 600;
        }

        .revenue-callout .highlight {
            display: block;
            margin-top: 0.4rem;
            font-size: 0.85rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.85);
        }

        /* ---- FEATURES LIST ---- */
        .features-list {
            list-style: none;
            margin-bottom: 1.8rem;
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
        }

        .features-list li {
            display: flex;
            align-items: flex-start;
            gap: 0.6rem;
            font-size: 0.87rem;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.4;
        }

        .feature-check {
            font-size: 0.9rem;
            margin-top: 0.05rem;
            flex-shrink: 0;
        }

        .feature-main {
            font-weight: 500;
            color: rgba(255, 255, 255, 0.88);
        }

        /* ---- PLAN BUTTONS ---- */
        .plan-btn,
        .plan-btn-solid {
            display: block;
            width: 100%;
            padding: 0.85rem 1rem;
            border-radius: 12px;
            font-size: 0.92rem;
            font-weight: 700;
            text-align: center;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.25s ease;
            border: 1px solid transparent;
            letter-spacing: 0.01em;
        }

        .plan-btn {
            background: transparent;
            border-color: rgba(255, 255, 255, 0.15);
            color: rgba(255, 255, 255, 0.6);
        }

        .plan-btn:hover {
            color: #fff;
            background: rgba(255, 255, 255, 0.06);
        }

        .plan-btn-solid {
            color: #fff;
            border: none;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .plan-btn-solid:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
        }

        /* ---- STATS BAND ---- */
        .stats-band {
            position: relative;
            z-index: 10;
            max-width: 1000px;
            margin: 0 auto 6rem;
            padding: 0 2rem;
        }

        .stats-band-inner {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1px;
            background: rgba(255, 255, 255, 0.07);
            border: 1px solid rgba(255, 255, 255, 0.07);
            border-radius: 20px;
            overflow: hidden;
        }

        @media (max-width: 700px) {
            .stats-band-inner {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .stat-block {
            background: rgba(15, 22, 40, 0.9);
            padding: 2rem 1.5rem;
            text-align: center;
        }

        .stat-block .s-num {
            font-size: 2.2rem;
            font-weight: 900;
            background: linear-gradient(135deg, #818cf8, #c084fc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.04em;
        }

        .stat-block .s-label {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.45);
            margin-top: 0.25rem;
            font-weight: 500;
        }

        /* ---- FAQ / COMPARE SECTION ---- */
        .compare-section {
            position: relative;
            z-index: 10;
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 2rem 6rem;
        }

        .compare-section h2 {
            font-size: 2rem;
            font-weight: 800;
            color: #fff;
            text-align: center;
            margin-bottom: 0.5rem;
            letter-spacing: -0.03em;
        }

        .compare-section .sub {
            text-align: center;
            color: rgba(255, 255, 255, 0.45);
            font-size: 0.95rem;
            margin-bottom: 2.5rem;
        }

        .compare-table {
            width: 100%;
            border-collapse: collapse;
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.07);
        }

        .compare-table thead th {
            padding: 1rem 1.25rem;
            background: rgba(30, 40, 70, 0.6);
            font-size: 0.85rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.75);
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.07);
        }

        .compare-table thead th:first-child {
            text-align: left;
        }

        .compare-table tbody tr {
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: background 0.15s;
        }

        .compare-table tbody tr:last-child {
            border-bottom: none;
        }

        .compare-table tbody tr:hover {
            background: rgba(99, 102, 241, 0.04);
        }

        .compare-table tbody td {
            padding: 0.9rem 1.25rem;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.55);
            text-align: center;
            vertical-align: middle;
        }

        .compare-table tbody td:first-child {
            text-align: left;
            color: rgba(255, 255, 255, 0.75);
            font-weight: 500;
        }

        .compare-table thead th.col-pro {
            background: rgba(99, 102, 241, 0.15);
            color: #a5b4fc;
        }

        .compare-table tbody td.col-pro {
            background: rgba(99, 102, 241, 0.05);
        }

        .tick {
            color: #22c55e;
            font-size: 1rem;
        }

        .cross {
            color: rgba(255, 255, 255, 0.2);
            font-size: 0.9rem;
        }

        .val-badge {
            display: inline-block;
            padding: 0.15rem 0.55rem;
            border-radius: 6px;
            font-size: 0.78rem;
            font-weight: 700;
        }

        .val-badge.free {
            background: rgba(100, 116, 139, 0.2);
            color: #94a3b8;
        }

        .val-badge.growth {
            background: rgba(6, 182, 212, 0.15);
            color: #22d3ee;
        }

        .val-badge.pro {
            background: rgba(99, 102, 241, 0.2);
            color: #818cf8;
        }

        .val-badge.elite {
            background: rgba(245, 158, 11, 0.15);
            color: #fbbf24;
        }

        /* ---- FAQ ---- */
        .faq-section {
            position: relative;
            z-index: 10;
            max-width: 720px;
            margin: 0 auto;
            padding: 0 2rem 6rem;
        }

        .faq-section h2 {
            font-size: 1.9rem;
            font-weight: 800;
            color: #fff;
            text-align: center;
            margin-bottom: 0.5rem;
            letter-spacing: -0.03em;
        }

        .faq-section .sub {
            text-align: center;
            color: rgba(255, 255, 255, 0.45);
            font-size: 0.95rem;
            margin-bottom: 2.5rem;
        }

        .faq-item {
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            margin-bottom: 0.75rem;
            overflow: hidden;
            background: rgba(15, 22, 40, 0.6);
        }

        .faq-q {
            padding: 1.1rem 1.4rem;
            font-size: 0.93rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.85);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            user-select: none;
            transition: background 0.2s;
        }

        .faq-q:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .faq-q .faq-arrow {
            color: rgba(255, 255, 255, 0.35);
            font-size: 0.8rem;
            transition: transform 0.25s;
            flex-shrink: 0;
        }

        .faq-a {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.35s ease, padding 0.25s ease;
            font-size: 0.87rem;
            color: rgba(255, 255, 255, 0.5);
            line-height: 1.7;
            padding: 0 1.4rem;
        }

        .faq-item.open .faq-a {
            max-height: 300px;
            padding: 0 1.4rem 1.2rem;
        }

        .faq-item.open .faq-arrow {
            transform: rotate(180deg);
        }

        /* ---- CTA SECTION ---- */
        .cta-section {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 0 2rem 6rem;
        }

        .cta-card {
            max-width: 750px;
            margin: 0 auto;
            padding: 4rem 3rem;
            border-radius: 24px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.08));
            border: 1px solid rgba(99, 102, 241, 0.2);
            position: relative;
            overflow: hidden;
        }

        .cta-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.15), transparent 70%);
            pointer-events: none;
        }

        .cta-card h2 {
            font-size: clamp(1.8rem, 4vw, 2.6rem);
            font-weight: 900;
            color: #fff;
            letter-spacing: -0.04em;
            margin-bottom: 1rem;
        }

        .cta-card p {
            color: rgba(255, 255, 255, 0.55);
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 2rem;
        }

        .cta-buttons {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .cta-btn-primary {
            padding: 0.9rem 2rem;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: #fff;
            border: none;
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 700;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.25s;
            box-shadow: 0 6px 30px rgba(99, 102, 241, 0.35);
        }

        .cta-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(99, 102, 241, 0.45);
        }

        .cta-btn-outline {
            padding: 0.9rem 2rem;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.75);
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.25s;
        }

        .cta-btn-outline:hover {
            background: rgba(255, 255, 255, 0.06);
            color: #fff;
        }

        /* ---- FOOTER ---- */
        .mini-footer {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.06);
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.25);
        }

        .mini-footer a {
            color: rgba(255, 255, 255, 0.4);
            text-decoration: none;
        }

        .mini-footer a:hover {
            color: rgba(255, 255, 255, 0.7);
        }
    </style>
</head>

<body>
    <!-- BACKGROUND -->
    <div class="pricing-bg"></div>

    <!-- NAVBAR -->
    <nav class="pricing-nav">
        <a href="/" class="nav-brand">
            ‚ö° TALENT<span>ROCK</span>
        </a>
        <ul class="nav-links">
            <li><a href="/">Home</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/pricing" class="active">Pricing</a></li>
            <li><a href="/contact">Contact</a></li>
        </ul>
        <div class="nav-cta">
            <a href="/login" class="btn-nav-ghost" sec:authorize="isAnonymous()">Login</a>
            <a href="/register" class="btn-nav-primary" sec:authorize="isAnonymous()">Get Started Free</a>
            <a href="/dashboard" class="btn-nav-primary" sec:authorize="isAuthenticated()">Dashboard</a>
        </div>
    </nav>

    <!-- HERO HEADER -->
    <section class="pricing-hero">
        <div class="pill-tag">Freelancer Subscription Plans</div>
        <h1>Scale Your Income with<br><span class="grad">The Right Plan</span></h1>
        <p>Start free, grow at your own pace. Every plan comes with India's lowest 5% commission and transparent
            milestone tracking.</p>
        <div class="billing-toggle">
            <span>Monthly</span>
            <label class="toggle-switch" title="Annual billing">
                <input type="checkbox" id="billing-toggle-input" />
                <div class="toggle-track"></div>
                <div class="toggle-thumb"></div>
            </label>
            <span>Annual</span>
            <span class="save-badge">Save 20%</span>
        </div>
    </section>

    <!-- PLANS GRID -->
    <section class="plans-section">
        <div class="plans-grid">

            <!-- ====== FREE PLAN ====== -->
            <div class="plan-card plan-free">
                <div class="plan-icon-wrap">
                    <span class="plan-icon">üÜì</span>
                </div>
                <div class="plan-name">Free</div>
                <span class="plan-badge"
                    style="background:rgba(100,116,139,0.12);color:#94a3b8;border-color:rgba(100,116,139,0.2);">Trial
                    Version</span>
                <div class="plan-price">
                    <span class="price-currency">‚Çπ</span>
                    <span class="price-amount" id="free-price">0</span>
                    <span class="price-period">/mo</span>
                </div>
                <div class="price-desc">Forever free ‚Ä¢ No credit card needed</div>

                <div class="plan-divider"></div>

                <div class="revenue-callout">
                    <strong>Revenue Logic:</strong> 5 bids √ó 20% win rate = <strong>1 project/mo</strong>
                    <span class="highlight">‚Çπ1,000 avg. admin earning per user</span>
                </div>

                <ul class="features-list">
                    <li>
                        <span class="feature-check" style="color:#94a3b8;">‚úì</span>
                        <span><span class="feature-main">5 bids</span> per month</span>
                    </li>
                    <li>
                        <span class="feature-check" style="color:#94a3b8;">‚úì</span>
                        <span><span class="feature-main">5% commission</span> on earnings</span>
                    </li>
                    <li>
                        <span class="feature-check" style="color:#94a3b8;">‚úì</span>
                        <span>Standard profile visibility</span>
                    </li>
                    <li>
                        <span class="feature-check" style="color:#94a3b8;">‚úì</span>
                        <span>Access to regular projects</span>
                    </li>
                    <li>
                        <span class="feature-check" style="color:#94a3b8;">‚úì</span>
                        <span>Basic dashboard analytics</span>
                    </li>
                </ul>

                <a href="/register?plan=FREE" class="plan-btn">Start Free ‚Üí</a>
            </div>


            <!-- ====== GROWTH PLAN ====== -->
            <div class="plan-card plan-growth">
                <div class="plan-icon-wrap">
                    <span class="plan-icon">üöÄ</span>
                </div>
                <div class="plan-name">Growth</div>
                <span class="plan-badge">Most Popular Start</span>
                <div class="plan-price">
                    <span class="price-currency">‚Çπ</span>
                    <span class="price-amount" id="growth-price">999</span>
                    <span class="price-period">/mo</span>
                </div>
                <div class="price-desc" id="growth-desc">Billed monthly</div>

                <div class="plan-divider"></div>

                <div class="revenue-callout">
                    <strong>Revenue Logic:</strong> 50 bids √ó 20% = 10 projects<br>
                    10 √ó ‚Çπ25,000 avg = ‚Çπ2.5L turnover
                    <span class="highlight">Admin earns ‚âà ‚Çπ13,499/user/mo</span>
                </div>

                <ul class="features-list">
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span><span class="feature-main">50 bids</span> per month</span>
                    </li>
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span><span class="feature-main">5% commission</span> on earnings</span>
                    </li>
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span>Higher profile visibility</span>
                    </li>
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span>Access to mid &amp; premium projects</span>
                    </li>
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span>AI matching priority <span
                                style="font-size:0.75rem;color:rgba(34,211,238,0.6)">(basic)</span></span>
                    </li>
                </ul>

                <button onclick="openModal('GROWTH','Growth','999','50','5%')" class="plan-btn-solid" id="btn-growth"
                    style="background:linear-gradient(135deg,#06b6d4,#0891b2);display:block;width:100%;padding:0.85rem 1rem;border-radius:12px;font-size:0.92rem;font-weight:700;text-align:center;color:#fff;border:none;cursor:pointer;transition:all 0.25s;box-shadow:0 4px 20px rgba(0,0,0,0.3);">Upgrade
                    to Growth ‚Üí</button>
            </div>


            <!-- ====== PRO PLAN ====== -->
            <div class="plan-card plan-pro">
                <div class="best-value-ring">‚≠ê Best Value</div>
                <div class="plan-icon-wrap">
                    <span class="plan-icon">‚ö°</span>
                </div>
                <div class="plan-name">Pro</div>
                <span class="plan-badge">Recommended</span>
                <div class="plan-price">
                    <span class="price-currency">‚Çπ</span>
                    <span class="price-amount" id="pro-price">1,799</span>
                    <span class="price-period">/mo</span>
                </div>
                <div class="price-desc" id="pro-desc">Billed monthly</div>

                <div class="plan-divider"></div>

                <div class="revenue-callout">
                    <strong>Revenue Logic:</strong> 120 bids √ó 20% = 24 projects<br>
                    24 √ó ‚Çπ20,000 avg = ‚Çπ4.8L turnover
                    <span class="highlight">Admin earns ‚âà ‚Çπ25,799/user/mo</span>
                </div>

                <ul class="features-list">
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span><span class="feature-main">120 bids</span> per month</span>
                    </li>
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span><span class="feature-main">5% commission</span> on earnings</span>
                    </li>
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span>Premium profile visibility</span>
                    </li>
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span>Advanced analytics &amp; insights</span>
                    </li>
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span>AI priority matching</span>
                    </li>
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span>Early access to high-value projects</span>
                    </li>
                </ul>

                <button onclick="openModal('PRO','Pro','1799','120','5%')" class="plan-btn-solid" id="btn-pro"
                    style="background:linear-gradient(135deg,#6366f1,#8b5cf6);display:block;width:100%;padding:0.85rem 1rem;border-radius:12px;font-size:0.92rem;font-weight:700;text-align:center;color:#fff;border:none;cursor:pointer;transition:all 0.25s;box-shadow:0 4px 20px rgba(99,102,241,0.4);">Upgrade
                    to Pro ‚Üí</button>
            </div>


            <!-- ====== ELITE PLAN ====== -->
            <div class="plan-card plan-elite">
                <div class="plan-icon-wrap">
                    <span class="plan-icon">üëë</span>
                </div>
                <div class="plan-name">Elite</div>
                <span class="plan-badge">Maximum Earnings</span>
                <div class="plan-price">
                    <span class="price-currency">‚Çπ</span>
                    <span class="price-amount" id="elite-price">2,499</span>
                    <span class="price-period">/mo</span>
                </div>
                <div class="price-desc" id="elite-desc">Billed monthly</div>

                <div class="plan-divider"></div>

                <div class="revenue-callout">
                    <strong>Revenue Logic:</strong> Unlimited bids ‚Üí big projects<br>
                    2 √ó ‚Çπ2,00,000 projects at 4%
                    <span class="highlight">Admin earns ‚âà ‚Çπ18,499/user/mo</span>
                </div>

                <ul class="features-list">
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span><span class="feature-main">Unlimited bids</span> per month</span>
                    </li>
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span><span class="feature-main">4% commission</span> <span
                                style="font-size:0.75rem;color:rgba(251,191,36,0.7)">(rewarded lower %)</span></span>
                    </li>
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span>Featured profile badge üèÖ</span>
                    </li>
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span>Early access to high-budget projects</span>
                    </li>
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span>Dedicated support line</span>
                    </li>
                    <li>
                        <span class="feature-check">‚úì</span>
                        <span>Deep performance insights</span>
                    </li>
                </ul>

                <button onclick="openModal('ELITE','Elite','2499','Unlimited','4%')" class="plan-btn-solid"
                    id="btn-elite"
                    style="background:linear-gradient(135deg,#f59e0b,#d97706);display:block;width:100%;padding:0.85rem 1rem;border-radius:12px;font-size:0.92rem;font-weight:700;text-align:center;color:#fff;border:none;cursor:pointer;transition:all 0.25s;box-shadow:0 4px 20px rgba(245,158,11,0.35);">Go
                    Elite ‚Üí</button>
            </div>

        </div>
    </section>

    <!-- STATS BAND -->
    <section class="stats-band">
        <div class="stats-band-inner">
            <div class="stat-block">
                <div class="s-num">5%</div>
                <div class="s-label">India's Lowest Commission</div>
            </div>
            <div class="stat-block">
                <div class="s-num">4x</div>
                <div class="s-label">Avg. Income Boost on Pro</div>
            </div>
            <div class="stat-block">
                <div class="s-num">20%</div>
                <div class="s-label">Avg. Freelancer Win Rate</div>
            </div>
            <div class="stat-block">
                <div class="s-num">‚Çπ0</div>
                <div class="s-label">Hidden Charges, Always</div>
            </div>
        </div>
    </section>

    <!-- COMPARISON TABLE -->
    <section class="compare-section">
        <h2>Detailed Plan Comparison</h2>
        <p class="sub">Every feature, side by side ‚Äî so you can choose with confidence</p>
        <table class="compare-table">
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Free</th>
                    <th>Growth</th>
                    <th class="col-pro">Pro ‚≠ê</th>
                    <th>Elite</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Monthly Price</td>
                    <td><span class="val-badge free">‚Çπ0</span></td>
                    <td><span class="val-badge growth">‚Çπ999</span></td>
                    <td class="col-pro"><span class="val-badge pro">‚Çπ1,799</span></td>
                    <td><span class="val-badge elite">‚Çπ2,499</span></td>
                </tr>
                <tr>
                    <td>Bids Per Month</td>
                    <td>5</td>
                    <td>50</td>
                    <td class="col-pro">120</td>
                    <td>Unlimited ‚ôæÔ∏è</td>
                </tr>
                <tr>
                    <td>Platform Commission</td>
                    <td>5%</td>
                    <td>5%</td>
                    <td class="col-pro">5%</td>
                    <td><strong style="color:#fbbf24">4%</strong></td>
                </tr>
                <tr>
                    <td>Profile Visibility</td>
                    <td>Standard</td>
                    <td>Higher</td>
                    <td class="col-pro">Premium</td>
                    <td>Featured üèÖ</td>
                </tr>
                <tr>
                    <td>Project Access</td>
                    <td>Regular</td>
                    <td>Mid + Premium</td>
                    <td class="col-pro">All + Early Access</td>
                    <td>High-Budget Early</td>
                </tr>
                <tr>
                    <td>AI Matching Priority</td>
                    <td><span class="cross">‚úï</span></td>
                    <td><span class="tick">‚úì</span> Basic</td>
                    <td class="col-pro"><span class="tick">‚úì</span> Advanced</td>
                    <td><span class="tick">‚úì</span> Advanced</td>
                </tr>
                <tr>
                    <td>Analytics Dashboard</td>
                    <td>Basic</td>
                    <td>Standard</td>
                    <td class="col-pro">Advanced</td>
                    <td>Deep Insights</td>
                </tr>
                <tr>
                    <td>Dedicated Support</td>
                    <td><span class="cross">‚úï</span></td>
                    <td><span class="cross">‚úï</span></td>
                    <td class="col-pro"><span class="cross">‚úï</span></td>
                    <td><span class="tick">‚úì</span></td>
                </tr>
                <tr>
                    <td>Featured Profile Badge</td>
                    <td><span class="cross">‚úï</span></td>
                    <td><span class="cross">‚úï</span></td>
                    <td class="col-pro"><span class="cross">‚úï</span></td>
                    <td><span class="tick">‚úì</span></td>
                </tr>
                <tr>
                    <td>Est. Projects/Month</td>
                    <td>~1</td>
                    <td>~10</td>
                    <td class="col-pro">~24</td>
                    <td>Unlimited potential</td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- FAQ -->
    <section class="faq-section">
        <h2>Frequently Asked Questions</h2>
        <p class="sub">Have a question? We've got answers.</p>

        <div class="faq-item">
            <div class="faq-q" onclick="toggleFaq(this)">
                Can I upgrade or downgrade my plan anytime?
                <span class="faq-arrow">‚ñº</span>
            </div>
            <div class="faq-a">Absolutely! You can upgrade at any time and the new plan takes effect immediately.
                Downgrading takes effect at the start of your next billing cycle. No penalties or hidden fees.</div>
        </div>

        <div class="faq-item">
            <div class="faq-q" onclick="toggleFaq(this)">
                What happens if I run out of bids before month-end?
                <span class="faq-arrow">‚ñº</span>
            </div>
            <div class="faq-a">Once you exhaust your monthly bid quota, you won't be able to place new bids until the
                next billing cycle (or until you upgrade). You can view projects and manage active work at any time.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-q" onclick="toggleFaq(this)">
                How is the 5% commission calculated?
                <span class="faq-arrow">‚ñº</span>
            </div>
            <div class="faq-a">Commission is automatically deducted from the milestone payment when a client approves
                it. For example, if a milestone is ‚Çπ10,000 ‚Äî ‚Çπ500 goes to the platform and ‚Çπ9,500 is credited to your
                wallet instantly.</div>
        </div>

        <div class="faq-item">
            <div class="faq-q" onclick="toggleFaq(this)">
                Why does Elite plan have 4% commission instead of 5%?
                <span class="faq-arrow">‚ñº</span>
            </div>
            <div class="faq-a">Elite freelancers tend to work on high-value projects (‚Çπ1L+). Even at 4%, the platform
                earns more in absolute terms. It's our way of rewarding top earners and incentivizing them to stay on
                the platform long-term.</div>
        </div>

        <div class="faq-item">
            <div class="faq-q" onclick="toggleFaq(this)">
                Is there an annual billing option?
                <span class="faq-arrow">‚ñº</span>
            </div>
            <div class="faq-a">Yes! Toggle to Annual billing at the top of this page to save 20% on all paid plans.
                Annual billing is charged once a year and works out significantly cheaper.</div>
        </div>

        <div class="faq-item">
            <div class="faq-q" onclick="toggleFaq(this)">
                Is the Free plan truly free forever?
                <span class="faq-arrow">‚ñº</span>
            </div>
            <div class="faq-a">Yes. The Free plan has no time limit and no credit card required. It's designed as a
                trial to let you test the platform before committing. You only pay when you're ready to grow.</div>
        </div>
    </section>

    <!-- CTA -->
    <section class="cta-section">
        <div class="cta-card">
            <h2>Ready to Start Earning<br>More on Talentrock?</h2>
            <p>Join thousands of freelancers who trust Talentrock for transparent, merit-based income. Start free ‚Äî
                upgrade when you're ready to scale.</p>
            <div class="cta-buttons">
                <a href="/register" class="cta-btn-primary">üöÄ Start Free Today</a>
                <a href="/contact" class="cta-btn-outline">Talk to Us ‚Üí</a>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <div th:replace="~{fragments/footer :: footer}"></div>

    <script>
        /* ---- BILLING TOGGLE ---- */
        const toggleInput = document.getElementById('billing-toggle-input');
        const prices = {
            growth: { monthly: '999', annual: '799' },
            pro: { monthly: '1,799', annual: '1,439' },
            elite: { monthly: '2,499', annual: '1,999' }
        };

        toggleInput.addEventListener('change', function () {
            const isAnnual = this.checked;

            document.getElementById('growth-price').textContent = isAnnual ? prices.growth.annual : prices.growth.monthly;
            document.getElementById('pro-price').textContent = isAnnual ? prices.pro.annual : prices.pro.monthly;
            document.getElementById('elite-price').textContent = isAnnual ? prices.elite.annual : prices.elite.monthly;

            const desc = isAnnual ? 'Billed annually (20% off)' : 'Billed monthly';
            document.getElementById('growth-desc').textContent = desc;
            document.getElementById('pro-desc').textContent = desc;
            document.getElementById('elite-desc').textContent = desc;

            const suffix = isAnnual ? '?plan=$PLAN&billing=annual' : '?plan=$PLAN';
            document.getElementById('btn-growth').href = suffix.replace('$PLAN', 'GROWTH').replace('?plan=', '/register?plan=');
            document.getElementById('btn-pro').href = suffix.replace('$PLAN', 'PRO').replace('?plan=', '/register?plan=');
            document.getElementById('btn-elite').href = suffix.replace('$PLAN', 'ELITE').replace('?plan=', '/register?plan=');
        });

        /* ---- FAQ ACCORDION ---- */
        function toggleFaq(el) {
            const item = el.parentElement;
            const isOpen = item.classList.contains('open');
            document.querySelectorAll('.faq-item.open').forEach(i => i.classList.remove('open'));
            if (!isOpen) item.classList.add('open');
        }

        /* ---- SCROLL REVEAL ANIMATION ---- */
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.plan-card, .stat-block, .faq-item').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(28px)';
            el.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
            observer.observe(el);
        });
    </script>

    <!-- ============================================================
         PAYMENT MODAL ‚Äî 5-STEP FLOW
         ============================================================ -->
    <div id="pay-modal-overlay"
        style="display:none;position:fixed;inset:0;z-index:9999;background:rgba(5,11,24,0.88);backdrop-filter:blur(8px);overflow-y:auto;">
        <div id="pay-modal"
            style="max-width:520px;margin:3rem auto;border-radius:24px;background:#0d1425;border:1px solid rgba(255,255,255,0.1);box-shadow:0 40px 100px rgba(0,0,0,0.6);overflow:hidden;position:relative;">

            <!-- STEP INDICATOR -->
            <div id="step-indicator"
                style="display:flex;align-items:center;justify-content:center;gap:0;padding:1.5rem 2rem 0;">
                <div class="si" data-s="1">1</div>
                <div class="si-line"></div>
                <div class="si" data-s="2">2</div>
                <div class="si-line"></div>
                <div class="si" data-s="3">3</div>
                <div class="si-line"></div>
                <div class="si" data-s="4">4</div>
                <div class="si-line"></div>
                <div class="si" data-s="5">5</div>
            </div>

            <!-- ========== STEP 1: CONFIRM ========== -->
            <div id="step1" class="modal-step">
                <div style="padding:2rem 2rem 0;">
                    <div style="text-align:center;margin-bottom:1.5rem;">
                        <div id="m-plan-icon" style="font-size:2.5rem;margin-bottom:0.75rem;">‚ö°</div>
                        <h2
                            style="font-size:1.4rem;font-weight:900;color:#fff;letter-spacing:-0.03em;margin-bottom:0.3rem;">
                            Confirm Your Subscription</h2>
                        <p style="color:rgba(255,255,255,0.45);font-size:0.88rem;">Review your plan details before
                            proceeding</p>
                    </div>

                    <div
                        style="background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);border-radius:16px;padding:1.5rem;margin-bottom:1.25rem;">
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;">
                            <span style="font-size:1.1rem;font-weight:800;color:#fff;" id="m-plan-name">Pro Plan</span>
                            <span id="m-price-badge"
                                style="background:rgba(99,102,241,0.15);color:#818cf8;border:1px solid rgba(99,102,241,0.3);padding:0.3rem 0.85rem;border-radius:999px;font-size:0.85rem;font-weight:700;">‚Çπ1,799/mo</span>
                        </div>
                        <div style="height:1px;background:rgba(255,255,255,0.07);margin-bottom:1rem;"></div>
                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.75rem;">
                            <div>
                                <div
                                    style="font-size:0.72rem;color:rgba(255,255,255,0.35);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.2rem;">
                                    Bids / Month</div>
                                <div style="font-size:0.95rem;font-weight:700;color:rgba(255,255,255,0.9);" id="m-bids">
                                    120</div>
                            </div>
                            <div>
                                <div
                                    style="font-size:0.72rem;color:rgba(255,255,255,0.35);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.2rem;">
                                    Commission</div>
                                <div style="font-size:0.95rem;font-weight:700;color:rgba(255,255,255,0.9);" id="m-comm">
                                    5%</div>
                            </div>
                            <div>
                                <div
                                    style="font-size:0.72rem;color:rgba(255,255,255,0.35);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.2rem;">
                                    Billing</div>
                                <div style="font-size:0.95rem;font-weight:700;color:rgba(255,255,255,0.9);">Monthly
                                </div>
                            </div>
                            <div>
                                <div
                                    style="font-size:0.72rem;color:rgba(255,255,255,0.35);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.2rem;">
                                    Next Charge</div>
                                <div style="font-size:0.95rem;font-weight:700;color:rgba(255,255,255,0.9);"
                                    id="m-next-charge">-</div>
                            </div>
                        </div>
                    </div>

                    <!-- Auto-renew toggle -->
                    <div
                        style="display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.07);border-radius:12px;padding:0.9rem 1.1rem;margin-bottom:1.5rem;">
                        <div>
                            <div style="font-size:0.9rem;font-weight:600;color:rgba(255,255,255,0.85);">Auto-Renewal
                            </div>
                            <div style="font-size:0.77rem;color:rgba(255,255,255,0.35);">Renew automatically each month
                            </div>
                        </div>
                        <label style="position:relative;width:44px;height:24px;cursor:pointer;">
                            <input type="checkbox" id="auto-renew-toggle" checked style="opacity:0;width:0;height:0;" />
                            <div id="ar-track"
                                style="position:absolute;inset:0;background:rgba(99,102,241,0.5);border:1px solid rgba(99,102,241,0.5);border-radius:999px;transition:background 0.25s;">
                            </div>
                            <div id="ar-thumb"
                                style="position:absolute;top:3px;left:3px;width:18px;height:18px;background:#6366f1;border-radius:50%;transition:transform 0.25s;transform:translateX(20px);">
                            </div>
                        </label>
                    </div>

                    <div style="display:flex;gap:0.75rem;">
                        <button onclick="closeModal()"
                            style="flex:1;padding:0.85rem;border-radius:12px;background:transparent;border:1px solid rgba(255,255,255,0.12);color:rgba(255,255,255,0.55);font-size:0.9rem;font-weight:600;cursor:pointer;transition:all 0.2s;">Cancel</button>
                        <button onclick="goStep(2)"
                            style="flex:2;padding:0.85rem;border-radius:12px;background:linear-gradient(135deg,#6366f1,#8b5cf6);color:#fff;font-size:0.9rem;font-weight:700;border:none;cursor:pointer;transition:all 0.2s;">Continue
                            to Payment ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- ========== STEP 2: PAYMENT METHOD ========== -->
            <div id="step2" class="modal-step" style="display:none;">
                <div style="padding:2rem;">
                    <button onclick="goStep(1)"
                        style="background:none;border:none;color:rgba(255,255,255,0.4);font-size:0.85rem;cursor:pointer;margin-bottom:1.5rem;padding:0;">‚Üê
                        Back</button>
                    <h2 style="font-size:1.3rem;font-weight:900;color:#fff;margin-bottom:0.4rem;">Choose Payment Method
                    </h2>
                    <p style="color:rgba(255,255,255,0.4);font-size:0.86rem;margin-bottom:1.75rem;">All payments are
                        secured with 256-bit SSL encryption üîí</p>

                    <div id="method-list" style="display:flex;flex-direction:column;gap:0.65rem;margin-bottom:1.75rem;">
                        <div class="pm-option" data-method="UPI" onclick="selectMethod('UPI')">
                            <span style="font-size:1.3rem;">üì±</span>
                            <div style="flex:1;">
                                <div style="font-weight:700;font-size:0.92rem;">UPI</div>
                                <div style="font-size:0.77rem;color:rgba(255,255,255,0.4);">Google Pay, PhonePe, Paytm,
                                    BHIM</div>
                            </div>
                            <div class="pm-check">‚úì</div>
                        </div>
                        <div class="pm-option" data-method="DEBIT_CARD" onclick="selectMethod('DEBIT_CARD')">
                            <span style="font-size:1.3rem;">üí≥</span>
                            <div style="flex:1;">
                                <div style="font-weight:700;font-size:0.92rem;">Debit Card</div>
                                <div style="font-size:0.77rem;color:rgba(255,255,255,0.4);">Visa, Mastercard, RuPay
                                </div>
                            </div>
                            <div class="pm-check">‚úì</div>
                        </div>
                        <div class="pm-option" data-method="CREDIT_CARD" onclick="selectMethod('CREDIT_CARD')">
                            <span style="font-size:1.3rem;">üíé</span>
                            <div style="flex:1;">
                                <div style="font-weight:700;font-size:0.92rem;">Credit Card</div>
                                <div style="font-size:0.77rem;color:rgba(255,255,255,0.4);">Visa, Mastercard, Amex</div>
                            </div>
                            <div class="pm-check">‚úì</div>
                        </div>
                        <div class="pm-option" data-method="NET_BANKING" onclick="selectMethod('NET_BANKING')">
                            <span style="font-size:1.3rem;">üè¶</span>
                            <div style="flex:1;">
                                <div style="font-weight:700;font-size:0.92rem;">Net Banking</div>
                                <div style="font-size:0.77rem;color:rgba(255,255,255,0.4);">All major Indian banks</div>
                            </div>
                            <div class="pm-check">‚úì</div>
                        </div>
                        <div class="pm-option" data-method="WALLET" onclick="selectMethod('WALLET')">
                            <span style="font-size:1.3rem;">üëõ</span>
                            <div style="flex:1;">
                                <div style="font-weight:700;font-size:0.92rem;">Talentrock Wallet</div>
                                <div style="font-size:0.77rem;color:rgba(255,255,255,0.4);">Use your platform wallet
                                    balance</div>
                            </div>
                            <div class="pm-check">‚úì</div>
                        </div>
                    </div>

                    <div style="display:flex;gap:0.75rem;">
                        <button onclick="goStep(1)"
                            style="flex:1;padding:0.85rem;border-radius:12px;background:transparent;border:1px solid rgba(255,255,255,0.12);color:rgba(255,255,255,0.55);font-size:0.9rem;font-weight:600;cursor:pointer;">Back</button>
                        <button onclick="proceedToForm()"
                            style="flex:2;padding:0.85rem;border-radius:12px;background:linear-gradient(135deg,#6366f1,#8b5cf6);color:#fff;font-size:0.9rem;font-weight:700;border:none;cursor:pointer;">Continue
                            ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- ========== STEP 3: PAYMENT FORM ========== -->
            <div id="step3" class="modal-step" style="display:none;">
                <div style="padding:2rem;">
                    <button onclick="goStep(2)"
                        style="background:none;border:none;color:rgba(255,255,255,0.4);font-size:0.85rem;cursor:pointer;margin-bottom:1.5rem;padding:0;">‚Üê
                        Back</button>
                    <h2 style="font-size:1.3rem;font-weight:900;color:#fff;margin-bottom:0.4rem;" id="form-title">UPI
                        Payment</h2>
                    <p style="color:rgba(255,255,255,0.4);font-size:0.86rem;margin-bottom:1.75rem;">Enter your payment
                        details below</p>

                    <!-- UPI FORM -->
                    <div id="upi-form">
                        <div style="margin-bottom:1rem;">
                            <label
                                style="font-size:0.78rem;font-weight:600;color:rgba(255,255,255,0.5);letter-spacing:0.05em;text-transform:uppercase;display:block;margin-bottom:0.5rem;">UPI
                                ID</label>
                            <input id="upi-id" type="text" placeholder="yourname@upi"
                                style="width:100%;padding:0.85rem 1rem;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:#fff;font-size:0.95rem;outline:none;transition:border-color 0.2s;" />
                        </div>
                        <div style="margin-bottom:1rem;">
                            <label
                                style="font-size:0.78rem;font-weight:600;color:rgba(255,255,255,0.5);letter-spacing:0.05em;text-transform:uppercase;display:block;margin-bottom:0.5rem;">Full
                                Name</label>
                            <input id="upi-name" type="text" placeholder="Your full name"
                                style="width:100%;padding:0.85rem 1rem;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:#fff;font-size:0.95rem;outline:none;" />
                        </div>
                        <div style="margin-bottom:1.25rem;">
                            <label
                                style="font-size:0.78rem;font-weight:600;color:rgba(255,255,255,0.5);letter-spacing:0.05em;text-transform:uppercase;display:block;margin-bottom:0.5rem;">Mobile
                                Number</label>
                            <input id="upi-mobile" type="tel" placeholder="+91 XXXXX XXXXX"
                                style="width:100%;padding:0.85rem 1rem;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:#fff;font-size:0.95rem;outline:none;" />
                        </div>
                        <div style="display:flex;align-items:center;gap:0.65rem;margin-bottom:1.5rem;">
                            <input type="checkbox" id="save-upi"
                                style="width:16px;height:16px;accent-color:#6366f1;cursor:pointer;" />
                            <label for="save-upi"
                                style="font-size:0.85rem;color:rgba(255,255,255,0.55);cursor:pointer;">Save this UPI for
                                future payments</label>
                        </div>
                    </div>

                    <!-- CARD / NET BANKING FORM -->
                    <div id="card-form" style="display:none;">
                        <div style="margin-bottom:1rem;">
                            <label
                                style="font-size:0.78rem;font-weight:600;color:rgba(255,255,255,0.5);letter-spacing:0.05em;text-transform:uppercase;display:block;margin-bottom:0.5rem;">Card
                                Number</label>
                            <input type="text" placeholder="XXXX XXXX XXXX XXXX" maxlength="19"
                                style="width:100%;padding:0.85rem 1rem;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:#fff;font-size:0.95rem;outline:none;" />
                        </div>
                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                            <div>
                                <label
                                    style="font-size:0.78rem;font-weight:600;color:rgba(255,255,255,0.5);letter-spacing:0.05em;text-transform:uppercase;display:block;margin-bottom:0.5rem;">Expiry</label>
                                <input type="text" placeholder="MM / YY" maxlength="7"
                                    style="width:100%;padding:0.85rem 1rem;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:#fff;font-size:0.95rem;outline:none;" />
                            </div>
                            <div>
                                <label
                                    style="font-size:0.78rem;font-weight:600;color:rgba(255,255,255,0.5);letter-spacing:0.05em;text-transform:uppercase;display:block;margin-bottom:0.5rem;">CVV</label>
                                <input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢" maxlength="4"
                                    style="width:100%;padding:0.85rem 1rem;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:#fff;font-size:0.95rem;outline:none;" />
                            </div>
                        </div>
                        <div style="margin-bottom:1.5rem;">
                            <label
                                style="font-size:0.78rem;font-weight:600;color:rgba(255,255,255,0.5);letter-spacing:0.05em;text-transform:uppercase;display:block;margin-bottom:0.5rem;">Cardholder
                                Name</label>
                            <input type="text" placeholder="Name on card"
                                style="width:100%;padding:0.85rem 1rem;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:#fff;font-size:0.95rem;outline:none;" />
                        </div>
                    </div>

                    <!-- WALLET INFO -->
                    <div id="wallet-info"
                        style="display:none;background:rgba(99,102,241,0.08);border:1px solid rgba(99,102,241,0.2);border-radius:12px;padding:1.25rem;margin-bottom:1.5rem;">
                        <div style="font-size:0.9rem;font-weight:600;color:rgba(255,255,255,0.8);margin-bottom:0.4rem;">
                            üëõ Talentrock Wallet</div>
                        <div style="font-size:0.82rem;color:rgba(255,255,255,0.45);">Your available balance will be used
                            for this transaction. Make sure you have sufficient balance.</div>
                    </div>

                    <div id="pay-error"
                        style="display:none;background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.2);border-radius:10px;padding:0.85rem 1rem;margin-bottom:1rem;color:#f87171;font-size:0.85rem;">
                    </div>

                    <div
                        style="background:rgba(16,185,129,0.08);border:1px solid rgba(16,185,129,0.15);border-radius:10px;padding:0.7rem 1rem;margin-bottom:1.25rem;display:flex;align-items:center;gap:0.5rem;">
                        <span style="color:#10b981;">üîí</span>
                        <span style="font-size:0.8rem;color:rgba(255,255,255,0.45);">Secured by 256-bit SSL. We never
                            store card details.</span>
                    </div>

                    <div style="display:flex;gap:0.75rem;">
                        <button onclick="goStep(2)"
                            style="flex:1;padding:0.85rem;border-radius:12px;background:transparent;border:1px solid rgba(255,255,255,0.12);color:rgba(255,255,255,0.55);font-size:0.9rem;font-weight:600;cursor:pointer;">Back</button>
                        <button onclick="submitPayment()" id="pay-btn"
                            style="flex:2;padding:0.85rem;border-radius:12px;background:linear-gradient(135deg,#6366f1,#8b5cf6);color:#fff;font-size:0.9rem;font-weight:700;border:none;cursor:pointer;">Pay
                            ‚Çπ<span id="pay-btn-amt">1,799</span> Securely üîí</button>
                    </div>
                </div>
            </div>

            <!-- ========== STEP 4: PROCESSING ========== -->
            <div id="step4" class="modal-step" style="display:none;">
                <div style="padding:3rem 2rem;text-align:center;">
                    <div id="proc-spinner"
                        style="width:64px;height:64px;border:3px solid rgba(99,102,241,0.2);border-top-color:#6366f1;border-radius:50%;animation:spin 0.85s linear infinite;margin:0 auto 1.5rem;">
                    </div>
                    <h2 style="font-size:1.3rem;font-weight:800;color:#fff;margin-bottom:0.5rem;">Requesting Payment‚Ä¶
                    </h2>
                    <p style="color:rgba(255,255,255,0.45);font-size:0.88rem;margin-bottom:2rem;">Please approve in your
                        UPI app. Do not close this window.</p>

                    <!-- Timer -->
                    <div style="display:flex;align-items:center;justify-content:center;gap:0.5rem;margin-bottom:2rem;">
                        <span style="font-size:0.85rem;color:rgba(255,255,255,0.4);">Expires in:</span>
                        <span id="pay-timer"
                            style="font-size:1rem;font-weight:700;color:#a78bfa;font-variant-numeric:tabular-nums;">5:00</span>
                    </div>

                    <button onclick="cancelPayment()"
                        style="padding:0.7rem 1.5rem;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.12);color:rgba(255,255,255,0.45);font-size:0.87rem;font-weight:500;cursor:pointer;">Cancel
                        Payment</button>
                </div>
            </div>

            <!-- ========== STEP 5: RESULT ========== -->
            <div id="step5" class="modal-step" style="display:none;">
                <div style="padding:3rem 2rem;text-align:center;">

                    <!-- SUCCESS -->
                    <div id="result-success">
                        <div
                            style="width:72px;height:72px;background:rgba(16,185,129,0.15);border:2px solid rgba(16,185,129,0.4);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;margin:0 auto 1.25rem;animation:popIn 0.4s ease;">
                            ‚úÖ</div>
                        <h2 style="font-size:1.5rem;font-weight:900;color:#fff;margin-bottom:0.5rem;">üéâ Subscription
                            Activated!</h2>
                        <p style="color:rgba(255,255,255,0.45);font-size:0.88rem;margin-bottom:2rem;">You now have
                            access to all <strong id="suc-plan" style="color:#a78bfa;">Pro</strong> features</p>

                        <div
                            style="background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);border-radius:16px;padding:1.5rem;margin-bottom:1.5rem;text-align:left;">
                            <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.75rem;">
                                <div>
                                    <div
                                        style="font-size:0.72rem;color:rgba(255,255,255,0.35);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.2rem;">
                                        Plan</div>
                                    <div style="font-size:0.88rem;font-weight:700;color:rgba(255,255,255,0.85);"
                                        id="suc-plan-name">Pro</div>
                                </div>
                                <div>
                                    <div
                                        style="font-size:0.72rem;color:rgba(255,255,255,0.35);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.2rem;">
                                        Bids Unlocked</div>
                                    <div style="font-size:0.88rem;font-weight:700;color:rgba(255,255,255,0.85);"
                                        id="suc-bids">120</div>
                                </div>
                                <div>
                                    <div
                                        style="font-size:0.72rem;color:rgba(255,255,255,0.35);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.2rem;">
                                        Start Date</div>
                                    <div style="font-size:0.88rem;font-weight:700;color:rgba(255,255,255,0.85);"
                                        id="suc-start">-</div>
                                </div>
                                <div>
                                    <div
                                        style="font-size:0.72rem;color:rgba(255,255,255,0.35);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.2rem;">
                                        Next Billing</div>
                                    <div style="font-size:0.88rem;font-weight:700;color:rgba(255,255,255,0.85);"
                                        id="suc-next">-</div>
                                </div>
                                <div style="grid-column:1/-1;">
                                    <div
                                        style="font-size:0.72rem;color:rgba(255,255,255,0.35);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.2rem;">
                                        Invoice</div>
                                    <div style="font-size:0.88rem;font-weight:700;color:rgba(255,255,255,0.85);"
                                        id="suc-invoice">-</div>
                                </div>
                            </div>
                        </div>

                        <p style="font-size:0.8rem;color:rgba(255,255,255,0.35);margin-bottom:1.5rem;">Redirecting to
                            dashboard in <span id="redirect-count">3</span>s‚Ä¶</p>

                        <div style="display:flex;gap:0.75rem;">
                            <a href="/dashboard"
                                style="flex:1;padding:0.85rem;border-radius:12px;background:linear-gradient(135deg,#6366f1,#8b5cf6);color:#fff;font-size:0.9rem;font-weight:700;text-align:center;text-decoration:none;">Go
                                to Dashboard</a>
                            <a href="/subscription/manage"
                                style="flex:1;padding:0.85rem;border-radius:12px;background:transparent;border:1px solid rgba(255,255,255,0.12);color:rgba(255,255,255,0.6);font-size:0.9rem;font-weight:600;text-align:center;text-decoration:none;">Manage
                                Plan</a>
                        </div>
                    </div>

                    <!-- FAILED -->
                    <div id="result-failed" style="display:none;">
                        <div
                            style="width:72px;height:72px;background:rgba(239,68,68,0.12);border:2px solid rgba(239,68,68,0.35);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;margin:0 auto 1.25rem;">
                            ‚ùå</div>
                        <h2 style="font-size:1.4rem;font-weight:900;color:#fff;margin-bottom:0.5rem;">Payment Failed
                        </h2>
                        <p style="color:rgba(255,255,255,0.45);font-size:0.88rem;margin-bottom:2rem;" id="fail-reason">
                            The payment could not be processed. Please try again.</p>
                        <div style="display:flex;gap:0.75rem;">
                            <button onclick="closeModal()"
                                style="flex:1;padding:0.85rem;border-radius:12px;background:transparent;border:1px solid rgba(255,255,255,0.12);color:rgba(255,255,255,0.55);font-size:0.9rem;font-weight:600;cursor:pointer;">Close</button>
                            <button onclick="goStep(3)"
                                style="flex:2;padding:0.85rem;border-radius:12px;background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;font-size:0.9rem;font-weight:700;border:none;cursor:pointer;">Retry
                                Payment ‚Üí</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Close X -->
            <button onclick="closeModal()"
                style="position:absolute;top:1.1rem;right:1.1rem;width:32px;height:32px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.1);border-radius:50%;color:rgba(255,255,255,0.5);font-size:1rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s;"
                title="Close">‚úï</button>
        </div>
    </div>

    <style>
        /* Step indicator */
        .si {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.07);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.3);
            font-size: 0.78rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .si.active {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: #fff;
            border-color: transparent;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.25);
        }

        .si.done {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border-color: rgba(16, 185, 129, 0.35);
        }

        .si-line {
            height: 2px;
            flex: 1;
            background: rgba(255, 255, 255, 0.07);
            min-width: 20px;
            transition: background 0.3s;
        }

        .si-line.done {
            background: rgba(16, 185, 129, 0.35);
        }

        /* Payment method option */
        .pm-option {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.9rem 1.1rem;
            background: rgba(255, 255, 255, 0.04);
            border: 1.5px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .pm-option:hover {
            background: rgba(99, 102, 241, 0.07);
            border-color: rgba(99, 102, 241, 0.25);
        }

        .pm-option.selected {
            background: rgba(99, 102, 241, 0.1);
            border-color: rgba(99, 102, 241, 0.4);
        }

        .pm-check {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 1.5px solid rgba(255, 255, 255, 0.2);
            color: transparent;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            flex-shrink: 0;
        }

        .pm-option.selected .pm-check {
            background: #6366f1;
            border-color: #6366f1;
            color: #fff;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes popIn {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>

    <script>
        /* ================================================================
           PAYMENT MODAL ‚Äî STATE + LOGIC
           ================================================================ */
        let modalPlan = '', modalName = '', modalPrice = '', modalBids = '', modalComm = '';
        let selectedMethod = 'UPI';
        let timerInterval = null;
        let autoRenewOn = true;

        const icons = { GROWTH: 'üöÄ', PRO: '‚ö°', ELITE: 'üëë' };
        const colors = {
            GROWTH: { badge: 'rgba(6,182,212,0.15)', text: '#22d3ee', border: 'rgba(6,182,212,0.3)', btn: 'linear-gradient(135deg,#06b6d4,#0891b2)' },
            PRO: { badge: 'rgba(99,102,241,0.15)', text: '#818cf8', border: 'rgba(99,102,241,0.3)', btn: 'linear-gradient(135deg,#6366f1,#8b5cf6)' },
            ELITE: { badge: 'rgba(245,158,11,0.12)', text: '#fbbf24', border: 'rgba(245,158,11,0.25)', btn: 'linear-gradient(135deg,#f59e0b,#d97706)' }
        };

        function openModal(plan, name, price, bids, comm) {
            modalPlan = plan;
            modalName = name;
            modalPrice = price;
            modalBids = bids;
            modalComm = comm;

            // Populate step 1
            document.getElementById('m-plan-icon').textContent = icons[plan] || '‚ö°';
            document.getElementById('m-plan-name').textContent = name + ' Plan';
            document.getElementById('m-bids').textContent = bids;
            document.getElementById('m-comm').textContent = comm;
            document.getElementById('pay-btn-amt').textContent = price.toLocaleString();

            const c = colors[plan] || colors.PRO;
            const badge = document.getElementById('m-price-badge');
            badge.textContent = '‚Çπ' + parseInt(price).toLocaleString('en-IN') + '/mo';
            badge.style.background = c.badge;
            badge.style.color = c.text;
            badge.style.border = '1px solid ' + c.border;

            // Next billing date
            const d = new Date(); d.setMonth(d.getMonth() + 1);
            document.getElementById('m-next-charge').textContent = d.toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' });

            document.getElementById('pay-modal-overlay').style.display = 'block';
            document.body.style.overflow = 'hidden';
            goStep(1);
        }

        function closeModal() {
            document.getElementById('pay-modal-overlay').style.display = 'none';
            document.body.style.overflow = '';
            clearTimer();
        }

        // Auto-renew toggle
        document.addEventListener('DOMContentLoaded', function () {
            var arIn = document.getElementById('auto-renew-toggle');
            var arTh = document.getElementById('ar-thumb');
            if (arIn) arIn.addEventListener('change', function () {
                autoRenewOn = this.checked;
                arTh.style.transform = this.checked ? 'translateX(20px)' : 'translateX(0)';
            });
            // Close on overlay click
            document.getElementById('pay-modal-overlay').addEventListener('click', function (e) {
                if (e.target === this) closeModal();
            });
        });

        function goStep(n) {
            document.querySelectorAll('.modal-step').forEach(s => s.style.display = 'none');
            document.getElementById('step' + n).style.display = 'block';
            updateStepUI(n);
        }

        function updateStepUI(active) {
            const sis = document.querySelectorAll('.si');
            const lines = document.querySelectorAll('.si-line');
            sis.forEach((si, i) => {
                si.classList.remove('active', 'done');
                if (i + 1 < active) si.classList.add('done');
                if (i + 1 === active) si.classList.add('active');
            });
            lines.forEach((l, i) => {
                l.classList.toggle('done', i + 1 < active);
            });
        }

        function selectMethod(method) {
            selectedMethod = method;
            document.querySelectorAll('.pm-option').forEach(o => {
                o.classList.toggle('selected', o.dataset.method === method);
            });
        }

        // Pre-select UPI on load
        document.addEventListener('DOMContentLoaded', () => selectMethod('UPI'));

        function proceedToForm() {
            if (!selectedMethod) { alert('Please select a payment method.'); return; }

            // Show correct form
            document.getElementById('upi-form').style.display = (selectedMethod === 'UPI') ? 'block' : 'none';
            document.getElementById('card-form').style.display = (['DEBIT_CARD', 'CREDIT_CARD', 'NET_BANKING'].includes(selectedMethod)) ? 'block' : 'none';
            document.getElementById('wallet-info').style.display = (selectedMethod === 'WALLET') ? 'block' : 'none';

            const titles = { UPI: 'UPI Payment', DEBIT_CARD: 'Debit Card Payment', CREDIT_CARD: 'Credit Card Payment', NET_BANKING: 'Net Banking', WALLET: 'Wallet Payment' };
            document.getElementById('form-title').textContent = titles[selectedMethod] || 'Payment Details';
            document.getElementById('pay-error').style.display = 'none';
            goStep(3);
        }

        function submitPayment() {
            const errEl = document.getElementById('pay-error');
            errEl.style.display = 'none';

            // Basic UPI validation
            if (selectedMethod === 'UPI') {
                const upiVal = document.getElementById('upi-id').value.trim();
                if (!upiVal || !upiVal.includes('@')) {
                    errEl.textContent = 'Please enter a valid UPI ID (e.g. name@upi)';
                    errEl.style.display = 'block';
                    return;
                }
            }

            goStep(4);
            startTimer(5 * 60);

            // Call backend
            const upiId = (selectedMethod === 'UPI') ? document.getElementById('upi-id').value.trim() : '';
            const formData = new URLSearchParams();
            formData.append('plan', modalPlan);
            formData.append('paymentMethod', selectedMethod);
            formData.append('upiId', upiId);
            formData.append('autoRenew', autoRenewOn ? 'true' : 'false');

            // Simulated 2.5s processing delay (mimics payment gateway)
            setTimeout(() => {
                fetch('/subscription/process', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded', 'X-Requested-With': 'XMLHttpRequest' },
                    body: formData.toString()
                })
                    .then(r => r.json())
                    .then(data => {
                        clearTimer();
                        if (data.success) showSuccess(data);
                        else showFailed(data.message || 'Payment could not be completed.');
                    })
                    .catch(() => {
                        // If not logged in, show login redirect message
                        clearTimer();
                        showFailed('Please log in to subscribe to a plan.');
                    });
            }, 2500);
        }

        function showSuccess(data) {
            document.getElementById('result-success').style.display = 'block';
            document.getElementById('result-failed').style.display = 'none';
            document.getElementById('suc-plan').textContent = data.plan;
            document.getElementById('suc-plan-name').textContent = data.plan;
            document.getElementById('suc-bids').textContent = data.bids;
            document.getElementById('suc-start').textContent = formatDate(data.startDate);
            document.getElementById('suc-next').textContent = formatDate(data.nextBilling);
            document.getElementById('suc-invoice').textContent = data.invoice;
            goStep(5);
            // Auto-redirect
            let count = 3;
            const rc = document.getElementById('redirect-count');
            const cd = setInterval(() => {
                count--; if (rc) rc.textContent = count;
                if (count <= 0) { clearInterval(cd); window.location.href = '/dashboard'; }
            }, 1000);
        }

        function showFailed(msg) {
            document.getElementById('result-success').style.display = 'none';
            document.getElementById('result-failed').style.display = 'block';
            document.getElementById('fail-reason').textContent = msg;
            goStep(5);
        }

        function cancelPayment() { clearTimer(); goStep(3); }

        function startTimer(seconds) {
            const el = document.getElementById('pay-timer');
            clearTimer();
            timerInterval = setInterval(() => {
                const m = Math.floor(seconds / 60);
                const s = seconds % 60;
                if (el) el.textContent = m + ':' + String(s).padStart(2, '0');
                if (seconds <= 0) { clearTimer(); showFailed('Payment timed out. Please try again.'); }
                seconds--;
            }, 1000);
        }

        function clearTimer() { if (timerInterval) { clearInterval(timerInterval); timerInterval = null; } }

        function formatDate(isoStr) {
            if (!isoStr) return '-';
            try {
                const d = new Date(isoStr);
                return d.toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' });
            } catch (e) { return isoStr; }
        }
    </script>
</body>

</html>