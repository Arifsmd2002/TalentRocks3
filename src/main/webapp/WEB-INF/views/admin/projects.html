<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>All Projects | Talentrock</title>
    <link rel="stylesheet" th:href="@{/css/style.css}" />
</head>

<body>
    <div class="app-layout">
        <div class="sidebar">
            <a href="/" class="sidebar-brand">
                <div class="logo-icon">‚ö°</div>Talentrock
            </a>
            <div class="sidebar-section">
                <div class="sidebar-label">Admin Panel</div>
                <a href="/admin/dashboard" class="sidebar-link"><span class="icon">üìä</span> Dashboard</a>
                <a href="/admin/users" class="sidebar-link"><span class="icon">üë•</span> Manage Users</a>
                <a href="/admin/projects" class="sidebar-link active"><span class="icon">üìã</span> All Projects</a>
            </div>
            <div class="sidebar-footer">
                <a href="/logout" class="btn btn-ghost btn-sm" style="width:100%;justify-content:center;">Sign Out</a>
            </div>
        </div>

        <main class="main-content">
            <div class="page-header">
                <h1 class="page-title">All Projects üìã</h1>
                <p class="page-subtitle">Monitor all platform projects</p>
            </div>

            <div class="card mb-4">
                <div class="card-body">
                    <form th:action="@{/admin/projects}" method="get" class="flex flex-wrap gap-2">
                        <div class="form-group mb-0 flex-1" style="min-width:300px;">
                            <input type="text" name="keyword" class="form-control" th:value="${keyword}"
                                placeholder="Search by title or client..." />
                        </div>
                        <div class="form-group mb-0" style="min-width:200px;">
                            <select name="category" class="form-control">
                                <option value="">All Categories</option>
                                <optgroup label="Development & IT">
                                    <option th:selected="${category == 'Web Development'}">Web Development</option>
                                    <option th:selected="${category == 'Mobile Apps'}">Mobile Apps</option>
                                    <option th:selected="${category == 'Android Apps'}">Android Apps</option>
                                    <option th:selected="${category == 'iPhone Apps'}">iPhone Apps</option>
                                    <option th:selected="${category == 'Software Architecture'}">Software Architecture
                                    </option>
                                    <option th:selected="${category == 'HTML'}">HTML</option>
                                    <option th:selected="${category == 'CSS'}">CSS</option>
                                    <option th:selected="${category == 'HTML 5'}">HTML 5</option>
                                    <option th:selected="${category == 'Javascript'}">Javascript</option>
                                    <option th:selected="${category == 'Python'}">Python</option>
                                    <option th:selected="${category == 'PHP'}">PHP</option>
                                    <option th:selected="${category == 'C++ Programming'}">C++ Programming</option>
                                    <option th:selected="${category == 'C# Programming'}">C# Programming</option>
                                    <option th:selected="${category == 'MySQL'}">MySQL</option>
                                    <option th:selected="${category == 'Wordpress'}">Wordpress</option>
                                    <option th:selected="${category == 'Data Processing'}">Data Processing</option>
                                    <option th:selected="${category == 'Web Scraping'}">Web Scraping</option>
                                    <option th:selected="${category == 'Linux'}">Linux</option>
                                </optgroup>
                                <optgroup label="Design & Creative">
                                    <option th:selected="${category == 'Website Design'}">Website Design</option>
                                    <option th:selected="${category == 'Graphic Design'}">Graphic Design</option>
                                    <option th:selected="${category == 'Logo Design'}">Logo Design</option>
                                    <option th:selected="${category == 'UI/UX Design'}">UI/UX Design</option>
                                    <option th:selected="${category == 'Banner Design'}">Banner Design</option>
                                    <option th:selected="${category == 'Illustration'}">Illustration</option>
                                    <option th:selected="${category == '3D Modelling'}">3D Modelling</option>
                                    <option th:selected="${category == 'Photoshop'}">Photoshop</option>
                                    <option th:selected="${category == 'Video Editing'}">Video Editing</option>
                                </optgroup>
                                <optgroup label="Writing & Content">
                                    <option th:selected="${category == 'Content Writing'}">Content Writing</option>
                                    <option th:selected="${category == 'Article Writing'}">Article Writing</option>
                                    <option th:selected="${category == 'Research Writing'}">Research Writing</option>
                                    <option th:selected="${category == 'Copywriting'}">Copywriting</option>
                                    <option th:selected="${category == 'Ghostwriting'}">Ghostwriting</option>
                                    <option th:selected="${category == 'Technical Writing'}">Technical Writing</option>
                                    <option th:selected="${category == 'Blogging'}">Blogging</option>
                                    <option th:selected="${category == 'Proofreading'}">Proofreading</option>
                                    <option th:selected="${category == 'Translation'}">Translation</option>
                                </optgroup>
                                <optgroup label="Sales & Marketing">
                                    <option th:selected="${category == 'Digital Marketing'}">Digital Marketing</option>
                                    <option th:selected="${category == 'Marketing'}">Marketing</option>
                                    <option th:selected="${category == 'SEO & Analytics'}">SEO & Analytics</option>
                                    <option th:selected="${category == 'Link Building'}">Link Building</option>
                                    <option th:selected="${category == 'Internet Marketing'}">Internet Marketing
                                    </option>
                                    <option th:selected="${category == 'Public Relations'}">Public Relations</option>
                                </optgroup>
                                <optgroup label="Business & Admin">
                                    <option th:selected="${category == 'Data Entry'}">Data Entry</option>
                                    <option th:selected="${category == 'Excel'}">Excel</option>
                                    <option th:selected="${category == 'Accounting'}">Accounting</option>
                                    <option th:selected="${category == 'Finance'}">Finance</option>
                                    <option th:selected="${category == 'Legal'}">Legal</option>
                                    <option th:selected="${category == 'Logistics'}">Logistics</option>
                                    <option th:selected="${category == 'Research'}">Research</option>
                                    <option th:selected="${category == 'Web Search'}">Web Search</option>
                                    <option th:selected="${category == 'Manufacturing'}">Manufacturing</option>
                                    <option th:selected="${category == 'eCommerce'}">eCommerce</option>
                                </optgroup>
                                <option th:selected="${category == 'Other'}">Other</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">Filter</button>
                    </form>
                </div>
            </div>

            <div class="card">
                <div th:if="${projects == null or projects.isEmpty()}"
                    style="padding:3rem; text-align:center; color:var(--text-muted);">No projects yet.</div>
                <div class="table-wrapper" th:if="${projects != null and !projects.isEmpty()}">
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Project</th>
                                <th>Client</th>
                                <th>Freelancer</th>
                                <th>Budget</th>
                                <th>Status</th>
                                <th>Posted</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="p, iter : ${projects}">
                                <td class="text-muted text-sm" th:text="${iter.index + 1}">1</td>
                                <td>
                                    <div style="font-weight:600; font-size:0.9rem;" th:text="${p.title}">Title</div>
                                    <div class="text-muted text-xs" th:text="${p.category}">Category</div>
                                </td>
                                <td class="text-secondary-color text-sm"
                                    th:text="${p.client.fullName != null ? p.client.fullName : p.client.username}">
                                    Client</td>
                                <td class="text-secondary-color text-sm"
                                    th:text="${p.assignedFreelancer != null ? (p.assignedFreelancer.fullName != null ? p.assignedFreelancer.fullName : p.assignedFreelancer.username) : '‚Äî'}">
                                    ‚Äî</td>
                                <td style="font-size:0.85rem;">
                                    <span th:if="${p.budgetMin != null}">‚Çπ<span
                                            th:text="${#numbers.formatDecimal(p.budgetMin, 1, 0)}">0</span> ‚Äì ‚Çπ<span
                                            th:text="${#numbers.formatDecimal(p.budgetMax, 1, 0)}">0</span></span>
                                </td>
                                <td>
                                    <span th:switch="${p.status.name()}">
                                        <span th:case="'OPEN'" class="project-badge badge-open">üü¢ Open</span>
                                        <span th:case="'IN_PROGRESS'" class="project-badge badge-progress">üîµ
                                            Active</span>
                                        <span th:case="'COMPLETED'" class="project-badge badge-completed">‚úÖ Done</span>
                                        <span th:case="'CANCELLED'" class="project-badge badge-cancelled">‚ùå
                                            Cancelled</span>
                                        <span th:case="*" class="project-badge badge-pending"
                                            th:text="${p.status}">Status</span>
                                    </span>
                                </td>
                                <td class="text-muted text-sm"
                                    th:text="${p.createdAt != null ? #temporals.format(p.createdAt, 'dd MMM yy') : '-'}">
                                    Date</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>
</body>

</html>