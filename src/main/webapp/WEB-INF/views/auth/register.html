<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register | Talentrox</title>
    <link rel="stylesheet" th:href="@{/css/style.css}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
</head>

<body
    style="display:flex; align-items:center; justify-content:center; min-height:100vh; background: var(--bg-base); padding: 2rem 1rem;">

    <div style="position:fixed; inset:0; pointer-events:none; z-index:0;">
        <div
            style="position:absolute; width:500px; height:500px; border-radius:50%; background:var(--primary); filter:blur(120px); opacity:0.12; top:-100px; right:-50px;">
        </div>
        <div
            style="position:absolute; width:400px; height:400px; border-radius:50%; background:var(--secondary); filter:blur(120px); opacity:0.1; bottom:-80px; left:-80px;">
        </div>
    </div>

    <div style="position:relative; z-index:1; width:100%; max-width:520px; padding:1rem;">
        <div class="text-center mb-4">
            <a href="/" class="navbar-brand" style="justify-content:center; font-size:2rem; display:flex;">
                <div class="logo-icon" style="width:48px;height:48px;font-size:24px;border-radius:14px;">‚ö°</div>
                Talentrox
            </a>
            <p class="text-secondary-color mt-2" style="font-size:0.95rem;">Join the future of transparent freelancing
            </p>
        </div>

        <div class="card animate-fade-up">
            <div class="card-body">
                <h2 style="font-size:1.4rem; margin-bottom:1.5rem;">Create Your Account</h2>

                <div th:if="${error}" class="alert alert-error">‚ö†Ô∏è <span th:text="${error}"></span></div>
                <div th:if="${success}" class="alert alert-success">‚úÖ <span th:text="${success}"></span></div>

                <form th:action="@{/register}" method="post">
                    <!-- Role selection FIRST -->
                    <div class="form-group">
                        <label class="form-label">I want to join as</label>
                        <div class="flex gap-2">
                            <label id="role-client-label"
                                style="flex:1; cursor:pointer; border:1.5px solid var(--bg-border); border-radius:10px; padding:12px; transition:all 0.2s; text-align:center;"
                                onclick="selectRole('CLIENT')">
                                <input type="radio" name="role" value="CLIENT" style="display:none;" id="role-client" />
                                <div style="font-size:1.5rem; margin-bottom:4px;">üíº</div>
                                <div style="font-weight:600; font-size:0.9rem;">Client</div>
                                <div style="font-size:0.75rem; color:var(--text-muted); margin-top:2px;">Post projects
                                </div>
                            </label>
                            <label id="role-freelancer-label"
                                style="flex:1; cursor:pointer; border:1.5px solid var(--bg-border); border-radius:10px; padding:12px; transition:all 0.2s; text-align:center;"
                                onclick="selectRole('FREELANCER')">
                                <input type="radio" name="role" value="FREELANCER" style="display:none;"
                                    id="role-freelancer" />
                                <div style="font-size:1.5rem; margin-bottom:4px;">üé®</div>
                                <div style="font-weight:600; font-size:0.9rem;">Freelancer</div>
                                <div style="font-size:0.75rem; color:var(--text-muted); margin-top:2px;">Find work</div>
                            </label>
                            <label id="role-admin-label"
                                style="flex:1; cursor:pointer; border:1.5px solid var(--bg-border); border-radius:10px; padding:12px; transition:all 0.2s; text-align:center;"
                                onclick="selectRole('ADMIN')">
                                <input type="radio" name="role" value="ADMIN" style="display:none;" id="role-admin" />
                                <div style="font-size:1.5rem; margin-bottom:4px;">üõ°Ô∏è</div>
                                <div style="font-weight:600; font-size:0.9rem;">Admin</div>
                                <div style="font-size:0.75rem; color:var(--text-muted); margin-top:2px;">Manage</div>
                            </label>
                        </div>
                    </div>

                    <div class="grid grid-2" style="gap:1rem;">
                        <div class="form-group mb-0">
                            <label class="form-label">Full Name</label>
                            <input type="text" name="fullName" class="form-control" placeholder="John Doe" required />
                        </div>
                        <div class="form-group mb-0">
                            <label class="form-label">Username</label>
                            <input type="text" name="username" class="form-control" placeholder="johndoe" required />
                        </div>
                    </div>
                    <div class="form-group mt-3">
                        <label class="form-label">Email Address</label>
                        <input type="email" name="email" class="form-control" placeholder="john@example.com" required />
                    </div>
                    <div class="grid grid-2 mt-3" style="gap:1rem;">
                        <div class="form-group mb-0">
                            <label class="form-label">Password</label>
                            <input type="password" name="password" class="form-control" placeholder="Min 8 characters"
                                required />
                        </div>
                        <div class="form-group mb-0">
                            <label class="form-label">Confirm Password</label>
                            <input type="password" name="confirmPassword" class="form-control"
                                placeholder="Repeat password" required />
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary mt-4" style="width:100%;">Create Account üöÄ</button>
                </form>

                <div class="text-center mt-3">
                    <span class="text-muted text-sm">Already have an account? </span>
                    <a href="/login" class="text-primary-color text-sm font-semibold">Sign In</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        function selectRole(role) {
            ['CLIENT', 'FREELANCER', 'ADMIN'].forEach(r => {
                const label = document.getElementById('role-' + r.toLowerCase() + '-label');
                if (r === role) {
                    label.style.borderColor = 'var(--primary)';
                    label.style.background = 'rgba(108,99,255,0.08)';
                    document.getElementById('role-' + r.toLowerCase()).checked = true;
                } else {
                    label.style.borderColor = 'var(--bg-border)';
                    label.style.background = 'transparent';
                }
            });
        }
        // Pre-select based on URL param
        const params = new URLSearchParams(window.location.search);
        const roleParam = params.get('role');
        if (roleParam) selectRole(roleParam.toUpperCase());
    </script>
</body>

</html>